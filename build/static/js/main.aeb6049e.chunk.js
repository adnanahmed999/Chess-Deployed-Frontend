(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,t,n){},119:function(e,t){},121:function(e,t){},133:function(e,t,n){"use strict";n.r(t);var c,a,i,s,r=n(0),o=n.n(r),l=n(74),j=n.n(l),u=(n(87),n(3)),b=n(75),d=n.n(b)()("https://multiplayer-chess-server.herokuapp.com/");d.on("init",(function(e){console.log("detailOb",e),c=e.playerNumber,i=e.clientID,a=e.roomName})),d.on("otherPlayerClientID",(function(e){s=e,console.log("down",s)}));n(114);var m=n(76),O=n(142),f=new m,h=new O.a;function v(e){alert("".concat(e," reset the Game.")),f.reset(),g()}function x(e,t,n){var c={from:e,to:t};n&&(c.promotion=n),f.move(c)&&g()}function p(e){!function(e,t){var n=f.moves({verbose:!0}).filter((function(e){return e.promotion}));n.some((function(n){return"".concat(n.from,":").concat(n.to)==="".concat(e,":").concat(t)}))&&g({from:e,to:t,color:n[0].color}),h.getValue().pendingPromotion||x(e,t)}(e.from,e.to)}function g(e){var t=f.game_over(),n={board:f.board(),pendingPromotion:e,isGameOver:t,turn:f.turn(),result:t?N():null,isChecked:f.in_check()};h.next(n)}function N(){if(f.in_checkmate()){var e="w"===f.turn()?"BLACK":"WHITE";return"CHECKMATE - WINNER - ".concat(e)}if(f.in_draw()){var t="50 - MOVES - RULE";return f.in_stalemate()?t="STALEMATE":f.in_threefold_repetition()?t="REPETITION":f.insufficient_material()&&(t="INSUFFICIENT MATERIAL"),"DRAW - ".concat(t)}return"UNKNOWN REASON"}var C=n(1);function y(e){var t=e.children,n=e.black?"square-black":"square-white";return Object(C.jsx)("div",{className:"".concat(n," board-square"),children:t})}var k=n(143),S=n(140);function E(e){var t=e.piece,n=t.type,c=t.color,a=e.position,i=Object(k.a)({type:"piece",item:{id:"".concat(a,"_").concat(n,"_").concat(c)},collect:function(e){return{isDragging:!!e.isDragging()}}}),s=Object(u.a)(i,3),r=s[0].isDragging,o=s[1],l=s[2],j="/assets/"+n+"_"+c+".png";return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(S.a,{connect:l,src:j}),Object(C.jsx)("div",{className:"piece-container",ref:o,style:{opacity:r?0:1},children:Object(C.jsx)("img",{src:j,alt:n+" "+c,className:"piece"})})]})}var w=n(144),M=n(78),P=n.p+"static/media/moveAudio.d7687e92.mp3",D=["r","n","b","q"];function I(e){var t=e.promotion,n=t.from,c=t.to,a=t.color;return Object(C.jsx)("div",{className:"board",children:D.map((function(e,t){return Object(C.jsx)("div",{className:"promote-square",children:Object(C.jsx)(y,{black:t%3===0,children:Object(C.jsx)("div",{className:"piece-container",onClick:function(){x(n,c,e),d.emit("promoteMove",{from:n,to:c,p:e})},children:Object(C.jsx)("img",{src:"/assets/".concat(e,"_").concat(a,".png"),alt:"",className:"piece cursor-pointer"})})})},t)}))})}function T(e){var t=e.piece,n=e.black,i=e.position,s=e.turn,o=Object(r.useState)(null),l=Object(u.a)(o,2),j=l[0],b=l[1],m=Object(M.a)(P),O=Object(u.a)(m,1)[0],f=Object(w.a)({accept:"piece",drop:function(e){var t=e.id.split("_");(1===c&&"w"===s||2===c&&"b"===s)&&(O(),d.emit("validMove",{from:t[0],to:i,roomName:a}))}}),v=Object(u.a)(f,2)[1];return Object(r.useEffect)((function(){var e=h.subscribe((function(e){var t=e.pendingPromotion;return t&&t.to===i?b(t):b(null)}));return function(){return e.unsubscribe()}}),[i]),Object(r.useEffect)((function(){d.on("validPromoteMove",(function(e){x(e.from,e.to,e.p)}))})),Object(C.jsx)("div",{className:"board-square",ref:v,children:Object(C.jsx)(y,{black:n,children:j&&(1===c&&"w"===s||2===c&&"b"===s)?Object(C.jsx)(I,{promotion:j}):t?Object(C.jsx)(E,{piece:t,position:i}):null})})}function G(e){var t=e.board,n=e.turn,a=Object(r.useState)([]),i=Object(u.a)(a,2),s=i[0],o=i[1];function l(e){return{x:"w"===n?e%8:Math.abs(e%8-7),y:"w"===n?Math.abs(Math.floor(e/8)-7):Math.floor(e/8)}}function j(e){var t=l(e);return(t.x+t.y)%2===0}function b(e){var t=l(e),n=t.x,c=t.y;return"".concat(["a","b","c","d","e","f","g","h"][n]).concat(c+1)}return Object(r.useEffect)((function(){o(1===c?t.flat():t.flat().reverse())}),[t,c]),Object(r.useEffect)((function(){d.on("movePieces",p)}),[]),Object(C.jsx)("div",{className:"board",children:s.map((function(e,t){return Object(C.jsx)("div",{className:"square",children:Object(C.jsx)(T,{piece:e,black:j(t),position:b(t),turn:n})},t)}))})}var A=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)(),o=Object(u.a)(s,2),l=o[0],j=o[1],b=Object(r.useState)(),m=Object(u.a)(b,2),O=m[0],f=m[1],x=Object(r.useState)(),p=Object(u.a)(x,2),N=p[0],y=p[1],k=Object(r.useState)(!1),S=Object(u.a)(k,2),E=S[0],w=S[1];return Object(r.useEffect)((function(){g();var e=h.subscribe((function(e){i(e.board),j(e.isGameOver),f(e.result),y(e.turn),w(e.isChecked)}));return function(){return e.unsubscribe()}}),[]),Object(r.useEffect)((function(){d.on("resetGame",v)}),[]),Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{children:[l&&Object(C.jsx)("h2",{className:"text",children:"GAME OVER"}),Object(C.jsxs)("div",{children:[Object(C.jsx)("button",{className:"btn btn-success mb-4",onClick:function(){d.emit("reStartNewGame",{roomName:a,playerNumber:c})},children:"Reset Game"}),E&&Object(C.jsx)("h1",{children:"Check!!!"})]})]}),Object(C.jsx)("div",{className:"board-container",children:Object(C.jsx)(G,{board:n,turn:N})}),Object(C.jsx)("div",{children:O&&Object(C.jsx)("p",{className:"text",children:O})})]})},_=n(141),R=n(81);function F(){return Object(C.jsx)("div",{children:Object(C.jsx)(_.a,{backend:R.a,children:Object(C.jsx)(A,{})})})}var q=n(43),B=n.n(q);var L=function(){var e,t,n,a=Object(r.useState)(),o=Object(u.a)(a,2),l=o[0],j=o[1],b=Object(r.useState)(!1),m=Object(u.a)(b,2),O=m[0],f=m[1],h=Object(r.useState)(""),v=Object(u.a)(h,2),x=v[0],p=v[1],g=Object(r.useState)(),N=Object(u.a)(g,2),y=N[0],k=N[1],S=Object(r.useState)(!1),E=Object(u.a)(S,2),w=E[0],M=E[1],P=Object(r.useRef)(),D=Object(r.useRef)();Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){j(e),P.current&&(P.current.srcObject=e)})),d.on("hey",(function(e){f(!0),p(e.from),k(e.signal)}))}),[]),l&&(e=Object(C.jsx)("video",{className:"videoPlayer own-Video",playsInline:!0,muted:!0,ref:P,autoPlay:!0})),w&&(t=Object(C.jsx)("video",{className:"videoPlayer partner-Video",playsInline:!0,ref:D,autoPlay:!0}));var I=1===c?"Player 2":"Player 1";return O&&(n=Object(C.jsxs)("div",{className:"make-center",children:[Object(C.jsxs)("h1",{children:[I," is calling you"]}),Object(C.jsx)("button",{className:"btn btn-success",onClick:function(){M(!0);var e=new B.a({initiator:!1,trickle:!1,stream:l});e.on("signal",(function(e){d.emit("acceptCall",{signal:e,to:x})})),e.on("stream",(function(e){D.current.srcObject=e})),e.signal(y)},children:"Accept"})]})),Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"styleVideoFrames",children:[Object(C.jsx)("div",{className:"video-Div partner",children:t}),Object(C.jsx)("div",{className:"video-Div user",children:e}),Object(C.jsx)("div",{className:"make-center",children:0==w&&Object(C.jsx)("button",{className:"btn btn-success mt-5",onClick:function(){return function(e){var t=new B.a({initiator:!0,trickle:!1,config:{iceServers:[{urls:"stun:numb.viagenie.ca",username:"adnanahmed.indian@gmail.com",credential:"passNUMB@123"},{urls:"turn:numb.viagenie.ca",username:"adnanahmed.indian@gmail.com",credential:"passNUMB@123"}]},stream:l});t.on("signal",(function(t){d.emit("callUser",{userToCall:e,signalData:t,from:i})})),t.on("stream",(function(e){D.current&&(D.current.srcObject=e)})),d.on("callAccepted",(function(e){M(!0),t.signal(e)}))}(s)},children:"Call Opponent"})}),Object(C.jsx)("div",{children:0==w&&n})]})})},U=n(4);function V(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(u.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!1),j=Object(u.a)(l,2),b=j[0],m=j[1],O=Object(r.useState)(!1),f=Object(u.a)(O,2),h=f[0],v=f[1],x=Object(r.useState)(!1),p=Object(u.a)(x,2),g=p[0],N=p[1],y=Object(r.useState)(!1),k=Object(u.a)(y,2),S=k[0],E=k[1],w=Object(r.useState)(""),M=Object(u.a)(w,2),P=M[0],D=M[1],I=Object(U.f)();function T(){I.go(0)}function G(e){console.log("Room Name:",e),console.log("Typeof Variable:",typeof e),o(e),c(!0)}function A(){m(!0)}function _(){v(!0)}function R(){E(!0)}function q(){N(!0)}return g&&d.emit("sendOtherPlayerClientID",s),Object(r.useEffect)((function(){d.on("gameCode",G),d.on("unknownCode",A),d.on("tooManyPlayers",_),d.on("bothJoined",q),d.on("opponentDisconnected",R)}),[]),Object(C.jsx)("div",{children:S?Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Opponent Disconnected"}),Object(C.jsx)("button",{className:"btn btn-success",onClick:T,children:" Main Page "})]}):g?Object(C.jsxs)("div",{className:"mainDiv",children:[Object(C.jsx)(L,{className:"mainDiv-Child"}),Object(C.jsx)(F,{className:"mainDiv-Child"})]}):n?Object(C.jsx)("div",{id:"gameScreen",className:"h-100",children:Object(C.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center h-100",children:[Object(C.jsxs)("h1",{children:["The game code is: ",Object(C.jsx)("span",{id:"gameCodeDisplay",children:s})]}),Object(C.jsx)("button",{className:"btn btn-success",onClick:T,children:" Main Page "})]})}):b?Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Please Enter Correct Code."}),Object(C.jsx)("button",{className:"btn btn-success",onClick:T,children:" Main Page "})]}):h?Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Two players have joined the Game."}),Object(C.jsx)("button",{className:"btn btn-success",onClick:T,children:" Main Page "})]}):Object(C.jsx)("section",{className:"vh-100",children:Object(C.jsx)("div",{className:"container h-100",children:Object(C.jsx)("div",{id:"initialScreen",className:"h-100",children:Object(C.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center h-100",children:[Object(C.jsx)("u",{children:Object(C.jsxs)("h1",{children:["Made by Adnan Ahmed. Connect me on"," ",Object(C.jsx)("a",{href:"https://www.linkedin.com/in/adnan-ahmed99/",children:"LinkedIn"})]})}),Object(C.jsx)("br",{}),Object(C.jsx)("h2",{children:"Chess Talks"}),Object(C.jsx)("button",{type:"submit",className:"btn btn-success",id:"newGameButton",onClick:function(){d.emit("newGame")},children:"Create New Game"}),Object(C.jsx)("div",{children:"OR"}),Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)("input",{type:"text",placeholder:"Enter Game Code",id:"gameCodeInput",value:P,onChange:function(e){D(e.target.value)}})}),Object(C.jsx)("button",{type:"submit",className:"btn btn-success",id:"joinGameButton",onClick:function(){console.log("Typed Code:",P),d.emit("joinGame",P)},children:"Join Game"})]})})})})})}var J=n(80);var W=function(){return Object(C.jsx)(J.a,{children:Object(C.jsx)(U.c,{children:Object(C.jsx)(U.a,{path:"/",exact:!0,children:Object(C.jsx)(V,{})})})})},K=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,145)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};j.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(W,{})}),document.getElementById("root")),K()},87:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.aeb6049e.chunk.js.map